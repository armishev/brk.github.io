<!-- Начало виджета TradingView -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>TradingView Widget</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
    }
    #currency-select {
      width: 100%;
      height: 40px;
      font-size: 16px;
    }
    #tradingview_chart {
      width: 100%;
      height: calc(100vh - 40px); /* Высота экрана минус высота селекта */
    }
  </style>
</head>
<body>
<select id="currency-select">
  <option value="BINANCE:BTCUSDT">BTC</option>
  <option value="BINANCE:TONUSDT">TON</option>
  <option value="BINANCE:ETHUSDT">ETH</option>
</select>

<div id="tradingview_chart"></div>

<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script type="text/javascript">
  function createWidget(symbol) {
    new TradingView.widget({
      "autosize": true,
      "symbol": symbol,
      "interval": "D",
      "timezone": "Europe/Moscow",
      "theme": "dark",
      "style": "1",
      "locale": "ru",
      "container_id": "tradingview_chart",
      "hide_legend": false,
      "allow_symbol_change": false,
      "save_image": false,
      "calendar": false,
      "hide_volume": true
    });
  }

  document.addEventListener("DOMContentLoaded", function() {
    var select = document.getElementById('currency-select');
    createWidget(select.value);

    select.addEventListener('change', function() {
      document.getElementById('tradingview_chart').innerHTML = "";
      createWidget(this.value);
    });
  });
</script>
</body>
</html>
<!-- Конец виджета TradingView -->
